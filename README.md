You can find the mutex lock and semaphore code in Meta.cpp starting at line 647